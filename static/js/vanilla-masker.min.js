!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.VMasker=e()}(this,(function(){var t=[9,16,17,18,36,37,38,39,40,91,92,93],e=function(t){return(t={delimiter:(t=t||{}).delimiter||".",lastOutput:t.lastOutput,precision:t.hasOwnProperty("precision")?t.precision:2,separator:t.separator||",",showSignal:t.showSignal,suffixUnit:t.suffixUnit&&" "+t.suffixUnit.replace(/[\s]/g,"")||"",unit:t.unit&&t.unit.replace(/[\s]/g,"")+" "||"",zeroCents:t.zeroCents}).moneyPrecision=t.zeroCents?0:t.precision,t},n=function(t,e,n){for(;e<t.length;e++)"9"!==t[e]&&"A"!==t[e]&&"S"!==t[e]||(t[e]=n);return t},i=function(t){this.elements=t};i.prototype.unbindElementToMask=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].lastOutput="",this.elements[t].onkeyup=!1,this.elements[t].onkeydown=!1,this.elements[t].value.length&&(this.elements[t].value=this.elements[t].value.replace(/\D/g,""))},i.prototype.bindElementToMask=function(e){for(var n=this,i=function(i){var o=(i=i||window.event).target||i.srcElement;(function(e){for(var n=0,i=t.length;n<i;n++)if(e==t[n])return!1;return!0})(i.keyCode)&&setTimeout((function(){n.opts.lastOutput=o.lastOutput,o.value=r[e](o.value,n.opts),o.lastOutput=o.value,o.setSelectionRange&&n.opts.suffixUnit&&o.setSelectionRange(o.value.length,o.value.length-n.opts.suffixUnit.length)}),0)},o=0,s=this.elements.length;o<s;o++)this.elements[o].lastOutput="",this.elements[o].onkeyup=i,this.elements[o].value.length&&(this.elements[o].value=r[e](this.elements[o].value,this.opts))},i.prototype.maskMoney=function(t){this.opts=e(t),this.bindElementToMask("toMoney")},i.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},i.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},i.prototype.maskPattern=function(t){this.opts={pattern:t},this.bindElementToMask("toPattern")},i.prototype.unMask=function(){this.unbindElementToMask()};var r=function(t){if(!t)throw new Error("VanillaMasker: There is no element to bind.");var e="length"in t?t.length?t:[]:[t];return new i(e)};return r.toMoney=function(t,n){if((n=e(n)).zeroCents){n.lastOutput=n.lastOutput||"";var i="("+n.separator+"[0]{0,"+n.precision+"})",r=new RegExp(i,"g"),o=t.toString().replace(/[\D]/g,"").length||0,s=n.lastOutput.toString().replace(/[\D]/g,"").length||0;t=t.toString().replace(r,""),o<s&&(t=t.slice(0,t.length-1))}var l=t.toString(),a=l.indexOf(n.separator),u=n.precision-(l.length-a-1);-1!==a&&u>0&&(l+="0"*u),l=l.replace(/[\D]/g,"");for(var p=new RegExp("^(0|\\"+n.delimiter+")"),h=new RegExp("(\\"+n.separator+")$"),c=l.substr(0,l.length-n.moneyPrecision),f=c.substr(0,c.length%3),g=new Array(n.precision+1).join("0"),m=0,v=(c=c.substr(c.length%3,c.length)).length;m<v;m++)m%3==0&&(f+=n.delimiter),f+=c[m];f=(f=f.replace(p,"")).length?f:"0";var d="";if(!0===n.showSignal&&(d=t<0||t.startsWith&&t.startsWith("-")?"-":""),!n.zeroCents){var y=Math.max(0,l.length-n.precision),b=l.substr(y,n.precision),k=b.length,S=n.precision>k?n.precision:k;g=(g+b).slice(-S)}return(n.unit+d+f+n.separator+g).replace(h,"")+n.suffixUnit},r.toPattern=function(t,e){var i,r="object"==typeof e?e.pattern:e,o=r.replace(/\W/g,""),s=r.split(""),l=t.toString().replace(/\W/g,""),a=l.replace(/\W/g,""),u=0,p=s.length,h="object"==typeof e?e.placeholder:void 0;for(i=0;i<p;i++){if(u>=l.length){if(o.length==a.length)return s.join("");if(void 0!==h&&o.length>a.length)return n(s,i,h).join("");break}if("9"===s[i]&&l[u].match(/[0-9]/)||"A"===s[i]&&l[u].match(/[a-zA-Z]/)||"S"===s[i]&&l[u].match(/[0-9a-zA-Z]/))s[i]=l[u++];else{if("9"===s[i]||"A"===s[i]||"S"===s[i])return void 0!==h?n(s,i,h).join(""):s.slice(0,i).join("");s[i]===l[u]&&u++}}return s.join("").substr(0,i)},r.toNumber=function(t){return t.toString().replace(/(?!^-)[^0-9]/g,"")},r.toAlphaNumeric=function(t){return t.toString().replace(/[^a-z0-9 ]+/i,"")},r}));